{% extends "./Layouts/base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
{% include './Layouts/navbar.html' %}

<div class="container-fluid" style="background-color: #b1b1b1;">
    <div class="card mb-3" style="max-width: 540px; background-color: #b1b1b1; border: none;">
        <div class="row g-0">
            <div class="col-md-4">
                <br>
                <img src="{{ url_for('static', filename='img/influencers/' + influencer.influencerusername + '-profile.png') }}"
                     class="img-fluid rounded-start"
                     onerror="this.onerror=null;this.src='{{ url_for('static', filename='img/influencers/alt.jpg') }}';"
                     alt="Profile Picture">
                <br><br><br>
                <p class="earnings" style="text-align: center;"><strong>Total Earnings</strong></p>
                <p style="text-align: center;">
                    <button type="button" class="btn btn-warning">{{influencer.influencerearnings}}</button>
                </p>
                <br><br><br>

                <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#myFormModal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-person-fill-gear" viewBox="0 0 16 16">
                        <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5.256A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1 1.544-3.393Q8.844 9.002 8 9c-5 0-6 3-6 4m9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c-.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382zM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/>
                    </svg>
                </button>

                <div class="modal fade" id="myFormModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Profile</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form class="row g-3" action="/profile/edit/{{influencer.influencerusername}}" method="POST">
                                    <div class="col-md-4">
                                        <label for="inputEmail4" class="form-label">Username</label>
                                        <input type="email" class="form-control" id="inputEmail4" required readonly value="{{influencer.influencerusername}}">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="inputState" class="form-label">Category</label>
                                        <select id="inputState" class="form-select" name="influencercategory">
                                            {% for category in category %}
                                                <option value="{{ category.categoryname }}" 
                                                    {% if category.categoryname == influencer.cate.categoryname %}selected{% endif %}>
                                                    {{ category.categoryname }}
                                                </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-4">
                                        <label for="inputAddress" class="form-label">Followers</label>
                                        <input type="text" class="form-control" id="followers" placeholder="Followers count" name="influencerreach" value="{{influencer.influencerreach}}">
                                    </div>
                                    <div class="col-12">
                                        <label for="inputAddress" class="form-label">Description</label>
                                        <textarea type="text" class="form-control" id="inputdescription" placeholder="Write something about yourself" name="influencerdescription" rows="3">{{influencer.influencerdescription}}</textarea>
                                    </div>
                                    <span>
                                        {% for platform in platforms %}
                                            {% set is_checked = platform.platformname in userplatform | map(attribute='platformname') %}
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox{{loop.index}}" name = "platform" value="{{ platform.platformname }}"
                                                {% if is_checked %}checked{% endif %}>
                                                <label class="form-check-label" for="inlineCheckbox{{loop.index}}">{{ platform.platformname }}</label>
                                            </div>
                                        {% endfor %}
                                    </span>
                                    <div class="input-group mb-3">
                                        <input type="file" class="form-control" id="inputGroupFile02">
                                        <label class="input-group-text" for="inputGroupFile02">Upload Pic</label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" name="ispublic" value="True" {% if influencer.ispublic %}checked{% endif %}>
                                            <label class="form-check-label" for="flexSwitchCheckChecked">Public</label>
                                        </div>
                                        
                                    </div>
                                    
                                    <div class="col-12 d-flex justify-content-center">
                                      <button type="submit" class="btn btn-success">Save</button>
                                    </div>                                  
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-md-8">
                <div class="card-body" style="background-color: transparent;">
                    <h5 class="card-title">{{influencer.influencerusername}}</h5>
                    <p class="card-text">{{influencer.influencerdescription}}</p>
                    <br>
                    <span><strong>Niche:</strong></span>
                    {% for niche in niche %}
                        <span class="badge rounded-pill bg-success">{{niche.nichename}}</span>
                    {% endfor %}
                    <p></p>
                    <p class="card-text">
                        <span><strong>Followers:</strong></span>
                        <span class="badge rounded-pill bg-danger">{{influencer.influencerreach}}</span>
                    </p>
                    <p>
                        <span><strong>Available On</strong></span>
                        {% for platform in userplatform %}
                            <span class="badge rounded-pill bg-dark">{{platform.platformname}}</span>
                        {% endfor %}
                    </p>
                    <span><strong>Active since</strong></span>
                    <span class="badge rounded-pill bg-primary">{{influencer.influencertenure}} years</span>
                    {% if influencer.ispublic %}
                        <span class="badge rounded-pill bg-primary">Public</span>
                    {% else %}
                        <span class="badge rounded-pill bg-primary">Private</span>
                    {% endif %}
                    <br><br>
                    <p class="card-text"><small class="text-muted">Last updated {{influencer.lastupdated}}</small></p>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
